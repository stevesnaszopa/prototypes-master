Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;(function(){function m(a,b,d){if("_root"==b)return d;if(a!==d){var c;p||(a.matches&&(p=a.matches),a.webkitMatchesSelector&&(p=a.webkitMatchesSelector),a.mozMatchesSelector&&(p=a.mozMatchesSelector),a.msMatchesSelector&&(p=a.msMatchesSelector),a.oMatchesSelector&&(p=a.oMatchesSelector),p||(p=f.matchesSelector));c=p;if(c.call(a,b))return a;if(a.parentNode)return r++,m(a.parentNode,
b,d)}}function s(a,b,d,c){g[a.id]||(g[a.id]={});g[a.id][b]||(g[a.id][b]={});g[a.id][b][d]||(g[a.id][b][d]=[]);g[a.id][b][d].push(c)}function c(a,b,d,c){if(c||d)if(c)for(var f=0;f<g[a.id][b][d].length;f++){if(g[a.id][b][d][f]===c){g[a.id][b][d].pop(f,1);break}}else delete g[a.id][b][d];else g[a.id][b]={}}function e(a,b,d){if(g[a][d]){var c=b.target||b.srcElement,e,k,l={},h=k=0;r=0;for(e in g[a][d])g[a][d].hasOwnProperty(e)&&(k=m(c,e,n[a].element))&&f.matchesEvent(d,n[a].element,k,"_root"==e,b)&&(r++,
g[a][d][e].match=k,l[r]=g[a][d][e]);b.stopPropagation=function(){b.cancelBubble=!0};for(k=0;k<=r;k++)if(l[k])for(h=0;h<l[k].length;h++){if(!1===l[k][h].call(l[k].match,b)){f.cancel(b);return}if(b.cancelBubble)return}}}function h(a,b,d,h){function m(a){return function(b){e(k,b,a)}}a instanceof Array||(a=[a]);d||"function"!=typeof b||(d=b,b="_root");var k=this.id,l;for(l=0;l<a.length;l++)g[k]&&g[k][a[l]]||f.addEvent(this,a[l],m(a[l])),h?c(this,a[l],b,d):s(this,a[l],b,d);return this}function f(a,b,c,
e){if("string"==typeof a&&"function"==typeof b||"string"==typeof b)f(document).on(a,b,c,e||!1);if(!(this instanceof f)){for(var g in n)if(n[g].element===a)return n[g];q++;n[q]=new f(a,q);n[q]._on=n[q].on;n[q].on=function(a,b,c,d){var e="function"==typeof b?b:c;if("function"==typeof b?c:d)a=[a],"string"==typeof b&&a.push(b),a.push(function(a){return function(b){b.defaultPrevented||Bootstrapper.Delegate.load(this);"undefined"!=typeof b.preventDefault?b.preventDefault():b.returnValue=!1;a.call(this)}}(e)),
this._on.apply(this,a);else return this._on.call(this,a,b,c)};return n[q]}this.element=a;this.id=b}var p,r=0,q=0,g={},n={};f.prototype.on=function(a,b,c){return h.call(this,a,b,c)};f.prototype.off=function(a,b,c){return h.call(this,a,b,c,!0)};f.matchesSelector=function(){};f.cancel=function(a){a.preventDefault();a.stopPropagation()};f.addEvent=function(a,b,c){a.element.addEventListener(b,c,"blur"==b||"focus"==b)};f.matchesEvent=function(){return!0};f.load=function(a){setTimeout(function(a,c){return function(){if(a.nodeName&&
"a"==a.nodeName.toLowerCase()){if(c&&/^javascript\s*\:/.test(c))return(new Function(unescape(c))).call(window);window.location.href=c}}}(a,a.href||window.location.href),750)};window.Bootstrapper.Delegate=f})();(function(m){var s=m.addEvent;m.addEvent=function(c,e,h){if(c.element.addEventListener)return s(c,e,h);"focus"==e&&(e="focusin");"blur"==e&&(e="focusout");c.element.attachEvent("on"+e,h)};m.simpleMatchesSelector=function(c){return"."===c.charAt(0)?-1<(" "+this.className+" ").indexOf(" "+c.slice(1)+
" "):"#"===c.charAt(0)?this.id===c.slice(1):this.tagName.toUpperCase()===c.toUpperCase()};m.matchesSelector=function(c){if(~c.indexOf(" ")||~c.indexOf("\x3e")){var e=this;for(c=c.split(" ").reverse();c.length;){var h=c.shift();if(~h.indexOf("\x3e")){for(h=h.split("\x3e").reverse();h.length;)if(tempSel=h.shift(),m.simpleMatchesSelector.call(e,tempSel))e=e.parentNode;else return!1;if(!c.length)return!0}else for(;e!=document;){var f=m.simpleMatchesSelector.call(e,h),e=e.parentNode;if(f){if(!c.length)return!0;
break}}}return!1}return m.simpleMatchesSelector.call(this,c)};m.cancel=function(c){c.preventDefault&&c.preventDefault();c.stopPropagation&&c.stopPropagation();c.returnValue=!1;c.cancelBubble=!0}})(window.Bootstrapper.Delegate);Bootstrapper.on=Bootstrapper.Delegate;Bootstrapper.AF=function(){var g={data:{},_dataConfig:{},logHistory:[],debug:!0,dataObj:function(a){var b=a?[]:"";b.finalized=!1;b.type=a;return b},validateInput:function(a){if("object"!==typeof a||"number"!==typeof a.length)return this.log("Error, input must be type Array");
/set|push|call|eval|finalize|join/.test(a[0])||this.log("Error, '"+a[0]+"' is not a valid command");return!0},storeData:function(a,b,d,c,e){e=this.getConfig(b,d,e);b=this.data[b][d];if(e.finalized)return this.log("Error, cannot modify finalized key '"+d+"'"),b;if("undefined"!==typeof b&&e.multi)return"join"==a?b=b.concat(c):b.push(c),b;e.multi?(d=[c],"join"==a&&(d=[].concat(c))):d=c;return d},getConfig:function(a,b,d,c){a=this._dataConfig[a]||{};c={};return"undefined"==typeof a[b]?(c.multi=d,c.finalized=
!1,c):a[b]},store:function(a,b,d,c,e){this.data[b]=this.data[b]||{};this.data[b][d]=this.storeData(a,b,d,c,e);return this.data[b][d]},parseCode:function(a){return((a||function(){})+"").replace(/^function\s*\(\s*\)\s*\{|\}$/g,"")},callFn:function(a,b,d,c){if("function"==typeof a)if(d)"undefined"!=typeof window.execScript?window.execScript(this.parseCode(a)):eval.call(window,this.parseCode(a));else return a.apply(window,c);else if("function"==typeof this.data[a][b])if(d)"undefined"!=typeof window.execScript?
window.execScript(this.parseCode(this.data[a][b])):eval.call(window,this.parseCode(this.data[a][b]));else return c="object"==typeof c&&"number"==typeof c.length?c:[],this.data[a][b].apply(this.data[a],c);else return this.log("Error, '"+b+"' is not a function")},parse:function(a){if(this.validateInput(a)){a=Array.prototype.slice.call(a,0);var b=a.shift(),d=a.shift(),c=a.shift(),e=a[0];if(/set|push|join/.test(b))return this.store(b,d,c,e,/push|join/.test(b));if(/call|eval/.test(b))return this.callFn(d,
c,"eval"==b,a);if("finalize"==b)return a=this._dataConfig[d]=this._dataConfig[d]||{},a=a[c]||{multi:!1},a.finalized=!0,this._dataConfig[d][c]=a}},log:function(a){this.logHistory.push(a);return this.debug&&"object"==typeof console?console.log(a)&&!1:!1}};if("object"==typeof Bootstrapper.AF&&"[object Array]"!==Object.prototype.toString.call(Bootstrapper.AF))return Bootstrapper.AF;if("[object Array]"===Object.prototype.toString.call(Bootstrapper.AF))for(var h=Bootstrapper.AF,f=0;f<h.length;f++)try{g.parse(h[f])}catch(k){}return{push:function(a){return g.parse(a)}}}();
window.console=window.console||{log:function(){}};try{Bootstrapper.$_gaDlo=Bootstrapper.dataManager.getData()||{}}catch(e){Bootstrapper.$_gaDlo={}}Bootstrapper.$_gaMan=Bootstrapper.$ga_Man||{isArray:function(obj){if(Array.isArray)return Array.isArray(obj);return Object.prototype.toString.call(obj)=="[object Array]"},getElement:function(type,selector){try{var element;if(type=="id")element=document.getElementById(selector);if(type=="class")Bootstrapper.getElementsByClassName(selector);if(type==javascript)element=
selector.call(window);return element}catch(e){}},settingsHandler:function(settingsObject){var newObj={};var isFunction=function(functionToCheck){var getType={};return functionToCheck&&getType.toString.call(functionToCheck)==="[object Function]"};if(isFunction(settingsObject)){var temp=settingsObject;return temp.call(this)}for(var prop in settingsObject)if(settingsObject.hasOwnProperty(prop))if(isFunction(settingsObject[prop])){var temp=settingsObject[prop];newObj[prop]=temp.call(this)}else newObj[prop]=
settingsObject[prop];return newObj},setAdvanced:function(settings){var tmpArr=[];tmpArr.push(this.trackerName+settings.command);if(settings.value)tmpArr.push(settings.value);window._gaq.push(tmpArr)},setContentGrouping:function(settings){settings=this.settingsHandler.call(this,settings);var tmpArr=[];tmpArr.push(this.trackerName+"_setPageGroup");tmpArr.push(settings.index||"");tmpArr.push(settings.groupName||"");window._gaq.push(tmpArr)},setCustom:function(settings){settings=this.settingsHandler.call(this,
settings);var tmpArr=[];tmpArr.push(this.trackerName+"_setCustomVar");tmpArr.push(settings.slot);tmpArr.push(settings.name);tmpArr.push(settings.value||"");tmpArr.push(settings.scope||"3");window._gaq.push(tmpArr)},sendEvent:function(name,settings){settings=Bootstrapper.$_gaMan.settingsHandler.call(this,settings);var value=settings.value||null;value=typeof value=="string"&&!isNaN(parseInt(value))?parseInt(value):value;window._gaq.push([name+"_trackEvent",settings.category||"",settings.action||"",
settings.label||null,value||null,settings.nonInteraction||""])},sendPVEvent:function(name,settings){settings=Bootstrapper.$_gaMan.settingsHandler.call(this,settings);var tempArr=[];tempArr.push(name+"_trackPageview");tempArr.push(settings.path);window._gaq.push(tempArr)},setEvent:function(settings,evType){var sendFunc;var element;var selector;if(evType=="pv")sendFunc=Bootstrapper.$_gaMan.sendPVEvent;else sendFunc=Bootstrapper.$_gaMan.sendEvent;var name=this.trackerName,_set=settings;var linkTimer=
250;var moveOnclick=function(elem){elem.ensClick=element.onclick;elem.onclick=function(){return false}};var buildJSEvent=function(elem){Bootstrapper.on(elem).on(_set.trigger,function(){sendFunc.call(this,name,_set);if(_set.isLink)setTimeout(function(){try{elem.ensClick()}catch(e){}},linkTimer)})};var buildEvent=function(selector){Bootstrapper.on(document).on(settings.trigger,selector,function(){sendFunc.call(this,name,_set);if(typeof this.ensClick!="undefined")if(_set.isLink)setTimeout(function(){try{elem.ensClick()}catch(e){}},
linkTimer)})};if(settings.trigger=="pageload")Bootstrapper.bindDOMParsed(sendFunc.call(this,name,_set));else if(Bootstrapper.on)if(settings.findType=="javascript"){element=Bootstrapper.$_gaMan.getElement(_set.findType,_set.selector);if(Bootstrapper.$_gaMan.isArray(element))for(var j=0;j<element.length;j++)buildJSEvent.call(this,element[j]);else buildJSEvent.call(this,element)}else{if(settings.isLink){element=Bootstrapper.$_gaMan.getElement(_set.findType,_set.selector);if(Bootstrapper.$_gaMan.isArray(element))for(var j=
0;j<element.length;j++)try{moveOnclick(element[j])}catch(e){}else try{moveOnclick(element)}catch(e){}}switch(settings.findType){case "id":selector="#"+settings.selector;break;case "class":selector="."+settings.selector;break}buildEvent(selector)}},setECOM:function(settings){settings=this.settingsHandler.call(this,settings);var getValue=function(value){var tempObj;tempObj=Bootstrapper.$_gaMan.settingsHandler({finVal:value});return tempObj.finVal};var objValid=function(obj,prop,failVal){try{return getValue(obj[prop].value)}catch(e){return failVal}};
var itemsArray;var sourceObj,itemsObj={};var transArray=[];transArray.push(this.trackerName+"_addTrans");transArray.push(objValid(settings,"orderId",""));transArray.push(objValid(settings,"affiliation",""));transArray.push(objValid(settings,"total",""));transArray.push(objValid(settings,"tax",""));transArray.push(objValid(settings,"shipping",""));transArray.push(objValid(settings,"city",""));transArray.push(objValid(settings,"state",""));transArray.push(objValid(settings,"country",""));window._gaq.push(transArray);
itemsObj.sku=[];itemsObj.name=[];itemsObj.category=[];itemsObj.price=[];itemsObj.quantity=[];if(settings.dataObject.type=="noObj"){itemsObj.sku.push(objValid(settings,"sku",""));itemsObj.name.push(objValid(settings,"name",""));itemsObj.category.push(objValid(settings,"category",""));itemsObj.price.push(objValid(settings,"price",""));itemsObj.quantity.push(objValid(settings,"quantity",""))}else{if(settings.dataObject.type=="text")sourceObj=window[settings.dataObject.value];else{sourceObj=Bootstrapper.$_gaMan.settingsHandler(settings.dataObject);
sourceObj=sourceObj.value||{}}var skuText=objValid(settings,"sku","");var nameText=objValid(settings,"name","");var catText=objValid(settings,"category","");var priceText=objValid(settings,"price","");var quantText=objValid(settings,"quantity","");if(Bootstrapper.$_gaMan.isArray(sourceObj)){var tempSource;for(var j=0;j<sourceObj.length;j++){tempSource=Bootstrapper.$_gaMan.settingsHandler(sourceObj[j]);itemsObj.sku.push(tempSource[skuText]||"");itemsObj.name.push(tempSource[nameText]||"");itemsObj.category.push(tempSource[catText]||
"");itemsObj.price.push(tempSource[priceText]||"");itemsObj.quantity.push(tempSource[quantText]||"")}}else{itemsObj.sku=sourceObj[skuText]||[];itemsObj.name=sourceObj[nameText]||[];itemsObj.category=sourceObj[catText]||[];itemsObj.price=sourceObj[priceText]||[];itemsObj.quantity=sourceObj[quantText]||[]}}for(var i=0;i<itemsObj.sku.length;i++){itemsArray=[];itemsArray.push(this.trackerName+"_addItem");itemsArray.push(objValid(settings,"orderId",""));itemsArray.push(getValue(itemsObj.sku[i])||"");itemsArray.push(getValue(itemsObj.name[i])||
"");itemsArray.push(getValue(itemsObj.category[i])||"");itemsArray.push(getValue(itemsObj.price[i])||"");itemsArray.push(getValue(itemsObj.quantity[i])||"");window._gaq.push(itemsArray)}window._gaq.push([this.trackerName+"_trackTrans"])}};Bootstrapper.$_gaPageFunc=function(){if(this.ar)return;else this.ar=true;window._gaq=window._gaq||[];this.gaMan.trackerName=this.trackerName;var actObj=Bootstrapper.$_gaMan.settingsHandler({parsedAccount:this.account});window._gaq.push([this.trackerName+"_setAccount",
actObj.parsedAccount]);if(this.contentGroup)for(var i=0;i<this.contentGroup.length;i++)this.gaMan.setContentGrouping(this.contentGroup[i]);if(this.advSettings)for(var i=0;i<this.advSettings.length;i++)this.gaMan.setAdvanced(this.advSettings[i]);if(this.customVariables)for(var i=0;i<this.customVariables.length;i++)this.gaMan.setCustom(this.customVariables[i]);if(this.events)for(var j=0;j<this.events.length;j++)this.gaMan.setEvent(this.events[j],"ev");if(this.pageViews)for(var m=0;m<this.pageViews.length;m++)this.gaMan.setEvent(this.pageViews[m],
"pv");if(!this.pageViewFinished){this.pageViewFinished=true;var pageViewArr=[];pageViewArr.push(this.trackerName+"_trackPageview");if(this.virtualPath&&this.virtualPath.enabled)pageViewArr.push(this.virtualPath.value);window._gaq.push(pageViewArr)}if(this.eComSettings&&!this.gaEComFinished){this.gaEComFinished=true;this.gaMan.setECOM(this.eComSettings)}if(!Bootstrapper.__$gaLoaded){Bootstrapper.__$gaLoaded=true;if(!Bootstrapper.$_gaMan.omitBasecode)Bootstrapper.insertScript(Bootstrapper.$_gaMan.baseCode)}};
Bootstrapper.$_gaMan.omitBasecode=Bootstrapper.$_gaMan.omitBasecode||false;Bootstrapper.$_gaMan.baseCode=Bootstrapper.$_gaMan.baseCode||"//www.google-analytics.com/ga.js";Bootstrapper.AF.push(["set","gaensGA","gaMan",Bootstrapper.$_gaMan]);Bootstrapper.AF.push(["set","gaensGA","account","UA-230643-2"]);Bootstrapper.AF.push(["set","gaensGA","trackerName","ensGA."]);Bootstrapper.AF.push(["push","gaensGA","advSettings",{"command":"_gat._anonymizeIp"}]);Bootstrapper.AF.push(["push","gaensGA","advSettings",
{"command":"_setCampaignCookieTimeout","value":"2592000000"}]);Bootstrapper.AF.push(["push","gaensGA","advSettings",{"command":"_setAllowLinker","value":true}]);Bootstrapper.AF.push(["push","gaensGA","advSettings",{"command":"_setDomainName","value":".thomson.co.uk"}]);Bootstrapper.AF.push(["push","gaensGA","customVariables",{slot:"10",name:"Cookie ID",value:function(){return Bootstrapper.Cookies.check("__utma")?Bootstrapper.Cookies.get("__utma").split(".")[0]+"."+Bootstrapper.Cookies.get("__utma").split(".")[1]:
"UTMA cookie not found"},scope:3}]);Bootstrapper.AF.push(["set","gaensGA","trackPageView",Bootstrapper.$_gaPageFunc]);Bootstrapper.bindPageSpecificCompletion(function(){Bootstrapper.AF.push(["call","gaensGA","trackPageView"])})},677104,233594);